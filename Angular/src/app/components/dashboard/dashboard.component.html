<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">

<nav class="navbar navbar-expand-lg static-top">
  <div class="container">
    <a class="navbar-brand"><h3>Online Classic Commentary</h3></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <!-- <li> <button class="btn btn-lg" (click)="openBm(textChanger)">Change Text</button></li> -->
        <!-- <li> <button class="btn btn-lg" (click)="callAPI()">Bibliography</button></li> -->
        <!-- <li> <button class="btn btn-lg" (click)="toggleShowFragments()">New Entry</button></li> -->
        <!-- <li> <button class="btn btn-lg" (click)="show = !show">3Columns</button></li> -->
        <li> <button class="btn btn-lg" [matMenuTriggerFor]="appMenu">More</button></li>
      </ul>
    </div>
  </div>
</nav>

<mat-menu #appMenu="matMenu">
  <button routerLink="/text" mat-menu-item>Text OSCC</button>
  <button routerLink="/fragments" mat-menu-item>Fragments</button>

  <!-- <button routerLink="/fragments" mat-menu-item>Fragments</button> -->
  <button (click)="openBm(getStarted)" mat-menu-item>Get Started</button>
  <button (click)="openBm(About)" mat-menu-item>About</button>
</mat-menu>

  <!-- <app-navbar></app-navbar> -->

<!-- Main container -->
<div class="container-fluid">
  <div class="row">

    <!-- Main Mat tab group -->
    <div class="col-sm anyClass">
    <mat-tab-group>
      <mat-tab label="Add/Remove"><br>
        <!-- Group to add/remove Authors, Books and Editors -->
        <mat-tab-group>
          <!-- Tab to add/remove Authors -->
          <mat-tab label="Author add/remove"><br>
            <mat-form-field>
              <mat-label>Select Author</mat-label>
              <mat-select [(ngModel)]="selectedAuthor">
                <mat-option *ngFor="let selectedAuthor of this.authors" [value]="selectedAuthor">
                  {{ selectedAuthor[1] }}                       
                </mat-option>
              </mat-select>
            </mat-form-field>

            <div mat-dialog-content>
              <mat-form-field class="example-form">
                <input matInput placeholder="Add Author" #input2 [(ngModel)]='inputAuthor' id="inputAuthor">
                <mat-hint>Fill in the name of a new Author</mat-hint>
              </mat-form-field>
            </div>  

            <br>
            <button mat-button (click)="createAuthor(inputAuthor)">Create author</button>
            <button mat-button (click)="deleteAuthor(selectedAuthor)">Delete selected Author</button>
          </mat-tab>

          <!-- Tab to add/remove Books -->
          <mat-tab label="Book add/remove"><br>
            <mat-form-field>
              <mat-label>Select Author</mat-label>
              <mat-select [(ngModel)]="selectedAuthor">
                <mat-option *ngFor="let selectedAuthor of this.authors" [value]="selectedAuthor"
                (click)="requestBooks(selectedAuthor[0])">
                  {{ selectedAuthor[1] }}                       
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Select Book</mat-label>
              <mat-select [(ngModel)]="selectedBook">
                <mat-option *ngFor="let selectedBook of this.books" [value]="selectedBook">
                  {{ selectedBook[1] }}                       
                </mat-option>
              </mat-select>
              <mat-hint>Select a book to be deleted</mat-hint>
            </mat-form-field>

            <div mat-dialog-content>
              <mat-form-field class="example-form">
                <input matInput placeholder="Add Book" #input2 [(ngModel)]='inputBook' id="inputBook">
                <mat-hint>Select an Author and fill in the name of the new Book</mat-hint>
              </mat-form-field>
            </div>  
  
            <br>
            <button mat-button (click)="createBook(selectedAuthor, inputBook)">Create Book</button>
            <button mat-button (click)="deleteBook(selectedAuthor, selectedBook)">Delete selected Book</button>
          </mat-tab>

          <!-- Tab to add/remove Editors -->
          <mat-tab label="Editor add/remove"><br>

            <mat-form-field>
              <mat-label>Select Author</mat-label>
              <mat-select [(ngModel)]="selectedAuthor">
                <mat-option *ngFor="let selectedAuthor of this.authors" [value]="selectedAuthor"
                (click)="requestBooks(selectedAuthor[0])">
                  {{ selectedAuthor[1] }}                       
                </mat-option>
              </mat-select>
            </mat-form-field>
  
            <mat-form-field>
              <mat-label>Select Book</mat-label>
              <mat-select [(ngModel)]="selectedBook">
                <mat-option *ngFor="let selectedBook of this.books" [value]="selectedBook"
                (click)="requestEditors(selectedAuthor[0], selectedBook[0])">
                  {{ selectedBook[1] }}                       
                </mat-option>
              </mat-select>
              <mat-hint>Select a book to be deleted</mat-hint>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Select Editor</mat-label>
              <mat-select [(ngModel)]="selectedEditor">
                <mat-option *ngFor="let selectedEditor of this.editors" [value]="selectedEditor">
                  {{ selectedEditor[1] }}                       
                </mat-option>
              </mat-select>
              <mat-hint>Select an Editor to be deleted</mat-hint>
            </mat-form-field>
          
            <div mat-dialog-content>
              <mat-form-field class="example-form">
                <input matInput placeholder="Add Editor" #input2 [(ngModel)]='inputEditor' id="inputEditor">
                <mat-hint>Select an Author and Book and fill in the name of the new Editor</mat-hint>
              </mat-form-field>
            </div>  
            <br>
            <button mat-button (click)="createEditor(selectedAuthor, selectedBook, inputEditor)">Create Editor</button>
            <button mat-button (click)="deleteEditor(selectedAuthor, selectedBook, selectedEditor)">Delete Editor</button>
            <button mat-button (click)="setMainEditor(selectedAuthor, selectedBook, selectedEditor)">Set as Main Editor</button>
          </mat-tab>
        </mat-tab-group>

        <!-- Mat Tab Group to create a fragment and everything related to it. -->
        </mat-tab>  
        <mat-tab label="Create Fragment"><br>
          <!-- First select your author, book and editor. This will be saved and used. -->
          <mat-form-field>
            <mat-label>Select Author</mat-label>
            <mat-select [(ngModel)]="selectedAuthor">
              <mat-option *ngFor="let selectedAuthor of this.authors" [value]="selectedAuthor"
              (click)="requestBooks(selectedAuthor[0])">
                {{ selectedAuthor[1] }}                       
              </mat-option>
            </mat-select>
          </mat-form-field>
  
            <mat-form-field>
              <mat-label>Select Book</mat-label>
              <mat-select [(ngModel)]="selectedBook">
                <mat-option *ngFor="let selectedBook of this.books" [value]="selectedBook"
                (click)="requestEditors(selectedAuthor[0], selectedBook[0])">
                  {{ selectedBook[1] }}                       
                </mat-option>
              </mat-select>
              <mat-hint>Select a book</mat-hint>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Select Editor</mat-label>
              <mat-select [(ngModel)]="selectedEditor">
                <mat-option *ngFor="let selectedEditor of this.editors" [value]="selectedEditor"
                (click)="setCreateFragmentParameters(selectedAuthor, selectedBook, selectedEditor)"
                (click)="getFragNumbersSelectedEditor(selectedAuthor, selectedBook, selectedEditor)">
                  {{ selectedEditor[1] }}                       
                </mat-option>
              </mat-select>
              <mat-hint>Select an Editor</mat-hint>
            </mat-form-field>        

          <mat-tab-group>
            <!-- Tab to create a fragment given Fragment number, line number and content -->
            <mat-tab label="Create Fragment"><br>
              <div mat-dialog-content>
                <mat-form-field class="example-full-width">
                  <input matInput type="number" placeholder="Fragment Number" #input2 [(ngModel)]='inputFragNum' id="inputFragNum">
                  <mat-hint>Fragment Number that the editor uses</mat-hint>
                </mat-form-field>
              </div>
              <div mat-dialog-content>
                <mat-form-field class="example-full-width">
                  <input matInput type="number" placeholder="Line Number" #input2 [(ngModel)]='inputLineNum' id="inputLineNum">
                  <mat-hint>Line Number that the editor uses</mat-hint>
                </mat-form-field>
              </div>
              <div mat-dialog-content>
                <mat-form-field class="example-full-width">
                  <input matInput placeholder="Fragment Content" #input2 [(ngModel)]='inputFragContent' id="inputFragContent">
                  <mat-hint>Separate Lines using HTML Paragraphs</mat-hint>
                </mat-form-field>
              </div>   
              <br>
              <button mat-button (click)="createFragment(inputFragNum, inputLineNum, inputFragContent)">Create Fragment</button>
              </mat-tab>
              <!-- Tab to add commentary to the selected Fragment -->
              <mat-tab label="Add Commentary">
                <div class="container">
                  <div class="row">
                    <div class="col-sm-6">
                      <mat-form-field>
                        <mat-label>Select fragment</mat-label>
                        <mat-select [(ngModel)]="selectedFragment">
                          <mat-option *ngFor="let selectedFragment of this.fragmentList" [value]="selectedFragment"
                          (click)="inputSelectedFragment(selectedFragment)">
                            {{ selectedFragment }} 
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
    
                      <div mat-dialog-content>
                        <mat-form-field class="example-full-width">
                          <input matInput placeholder="Fragment AppCrit" #input2 [(ngModel)]='inputAppCrit' id="inputAppCrit">
                        </mat-form-field>
                      </div>   
    
                      <div mat-dialog-content>
                        <mat-form-field class="example-full-width">
                          <input matInput placeholder="Fragment Differences" #input2 [(ngModel)]='inputDifferences' id="inputDifferences">
                        </mat-form-field>
                      </div>   
                              
                      <div mat-dialog-content>
                          <mat-form-field class="example-full-width">
                            <input matInput placeholder="Fragment Commentary" #input2 [(ngModel)]='inputCommentary' id="inputCommentary">
                            </mat-form-field>
                        </div>                           
    
                      <div mat-dialog-content>
                          <mat-form-field class="example-full-width">
                            <input matInput placeholder="Fragment Translation" #input2 [(ngModel)]='inputTranslation' id="inputTranslation">
                            </mat-form-field>
                      </div>   

                      <br>
                      <button mat-button (click)="uploadCommentary(inputAppCrit, inputDifferences, inputCommentary, inputTranslation)">Upload Commentary</button>
                    </div>
                  
                  <div class="col-sm-6">
                    <h4>Add Context</h4>                    
                    <div mat-dialog-content>
                      <mat-form-field class="example-full-width">
                        <input matInput placeholder="Fragment Context Author" #input2 [(ngModel)]='inputContextAuthor' id="inputContextAuthor">
                      </mat-form-field>
                    </div>  
                    <div mat-dialog-content>
                      <mat-form-field class="example-full-width">
                        <input matInput placeholder="Fragment Context" #input2 [(ngModel)]='inputContext' id="inputContext">
                      </mat-form-field>
                    </div> 

                    <br>
                    <button mat-button (click)="uploadContext(inputContextAuthor, inputContext)">Upload Context</button>

                    </div>
                  </div>
                </div>
              </mat-tab>
              <!-- Tab to add the fragments by secondary editors -->
              <mat-tab label="Add secondary editors"><br>
                <mat-form-field>
                  <mat-label>Secondary editor</mat-label>
                  <mat-select [(ngModel)]="selectedEditor">
                    <mat-option *ngFor="let selectedEditor of this.editors" [value]="selectedEditor">
                      {{ selectedEditor[1] }} 
                    </mat-option>
                  </mat-select>
                </mat-form-field>
               
                <mat-form-field class="example-full-width">
                  <input matInput placeholder="Fragment Content" #input2 [(ngModel)]='inputFragContent' id="inputFragContent">
                  <mat-hint>Separate Lines using HTML Paragraphs</mat-hint>
                </mat-form-field>
   
                <div mat-dialog-content>
                  <mat-form-field class="example-full-width">
                    <input matInput type="number" placeholder="Fragment Number" #input2 [(ngModel)]='inputFragNum' id="inputFragNum">
                  </mat-form-field>
                </div>
    
                <div mat-dialog-content>
                  <mat-form-field class="example-full-width">
                    <input matInput type="number" placeholder="Line Number" #input2 [(ngModel)]='inputLineNum' id="inputLineNum">
                  </mat-form-field>
                </div>                

                <button mat-button (click)="addOtherFrag(inputFragContent, inputFragNum, inputLineNum)">Upload Secondary Line</button>
              </mat-tab>
            </mat-tab-group>
          </mat-tab> 
        
        <!-- Tab Group to change a fragment. -->
        <mat-tab label="Change Fragment"><br>
          <mat-tab-group>

          <mat-tab label="Fix Content"><br>
            <h4>Press one of the fragments to change its contents fields.</h4>
            <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit(checkoutForm.value)">

                <mat-form-field class="example-full-width">
                  <mat-label>Fragment Commentary</mat-label>
                  <input matInput value='{{this.F_Commentaar}}' id="F_Commentaar" type="text" formControlName="F_Commentaar">
                  <!-- <button type="button" (click)="redactGivenFragment('F_Commentaar')">Upload</button> -->
                </mat-form-field>

                <mat-form-field class="example-full-width">
                  <mat-label>Fragment Differences</mat-label>
                  <input matInput value='{{this.F_Differences}}' id="F_Differences" type="text" formControlName="F_Differences">
                  <!-- <button type="button" (click)="redactGivenFragment('F_Commentaar')">Upload</button> -->
                </mat-form-field>
                                    
                <mat-form-field class="example-full-width">
                  <mat-label>Fragment Translation</mat-label>
                  <input matInput value='{{this.F_Translation}}' id="F_Translation" type="text" formControlName="F_Translation">
                  <!-- <button type="button" (click)="redactGivenFragment('F_Commentaar')">Upload</button> -->
                </mat-form-field>
                
                <mat-form-field class="example-full-width">
                  <mat-label>Fragment AppCrit</mat-label>
                  <input matInput value='{{this.F_AppCrit}}' id="F_AppCrit" type="text" formControlName="F_AppCrit">
                  <!-- <button type="button" (click)="redactGivenFragment('F_Commentaar')">Upload</button> -->
                </mat-form-field>
                
                <mat-form-field class="example-full-width">
                  <mat-label>Fragment Reconstruction</mat-label>
                  <input matInput value='{{this.F_Reconstruction}}' id="F_Reconstruction" type="text" formControlName="F_Reconstruction">
                  <!-- <button type="button" (click)="redactGivenFragment('F_Commentaar')">Upload</button> -->
                </mat-form-field>
                          
              <button mat-button class="button" type="submit">Upload</button>
            
            </form>
          </mat-tab>

          <mat-tab label="Fix Context"><br>
            <h4>Press one of the fragments to change its context fields.</h4>
            <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit(checkoutForm.value)">
              <mat-form-field class="example-full-width">
                <mat-label>Fragment Context</mat-label>
                <input matInput value='{{this.F_Context}}' id="F_Context" type="text" formControlName="F_Context">
                <!-- <button type="button" (click)="redactGivenFragment('F_Commentaar')">Upload</button> -->
              </mat-form-field>
            </form>

            <mat-form-field>
                <mat-label>Select context author</mat-label>
                <mat-select [(ngModel)]="selected3">
                    <mat-option *ngFor="let i of this.F_Context">
                    {{ i[0] }} 
                      
                    </mat-option>
                  </mat-select>
              </mat-form-field>




          </mat-tab>

          <mat-tab label="Fix Fragment"><br>
            <h4>Press one of the fragments to change.</h4>
            <mat-form-field>
              <mat-label>Select editor</mat-label>
              <mat-select [(ngModel)]="selected2">
                  <mat-option *ngFor="let selectedEditor of this.editors" [value]="selectedEditor[1]"
                  (click)="changeSelectedEditor(selectedEditor[0])">
                  {{ selectedEditor[1] }} 
                    
                  </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Select fragment</mat-label>
                <mat-select [(ngModel)]="selected2">
                  <mat-option *ngFor="let subtask of this.selectedEditorArray" [value]="selectedFragment"
                    (click)="retrieveSelectedLine(subtask.lineNumber)">
                  {{ subtask.lineNumber }} 
                  </mat-option>
                </mat-select>
          </mat-form-field>

          <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit(checkoutForm.value)">
              <mat-form-field class="example-full-width">
                <mat-label>Fragment Content</mat-label>
                <input matInput value='{{this.F_Content}}' id="F_Content" type="text" formControlName="F_Content">
                <!-- <button type="button" (click)="redactGivenFragment('F_Commentaar')">Upload</button> -->
              </mat-form-field>
              <button mat-button class="button" type="submit">Upload</button>
            </form>

          </mat-tab>

            <mat-tab label="Publish"><br>
              <h4>What fragments should be published?</h4>
            
              <mat-form-field>
              <mat-label>Select editor</mat-label>
              <mat-select [(ngModel)]="selected2">
                  <mat-option *ngFor="let selectedEditor of this.editors" [value]="selectedEditor[1]"
                  (click)="changeSelectedEditor(selectedEditor[0])">
                  {{ selectedEditor[1] }} 
                    
                  </mat-option>
                </mat-select>
            </mat-form-field>

            <section class="example-section">

              <span class="example-list-section">
                <ul>
                  <div *ngFor="let subtask of selectedEditorArray">
                    <mat-checkbox [(ngModel)]="subtask.completed"
                                  [color]="subtask.color"
                                  (ngModelChange)="publishFragment(subtask.lineNumber)">
                      {{subtask.lineNumber}}

                    </mat-checkbox>
                  </div>
                </ul>
              </span>
            </section>


            


          </mat-tab>
        </mat-tab-group>

        </mat-tab> 



    </mat-tab-group>



      </div>

</div>
</div>



