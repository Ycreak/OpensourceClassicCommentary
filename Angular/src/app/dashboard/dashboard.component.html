<!-- I think this can be removed. -->
<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">

<!-- Maybe we should get a local stylesheet? -->
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

<!-- Simple toolbar with all the different buttons and the title -->
<mat-toolbar color="primary">
    <span><h3 class='h3-title'>Dashboard</h3></span>
    <span class="spacer"></span>
    <button mat-button class="btn" (click)="Test()">TEST</button>
    <button mat-button class="btn" routerLink="/fragments">FRAGMENTS</button>
    <!-- <button mat-button class="btn" (click)="RequestAuthors()">RELOAD AUTHORS</button> -->
</mat-toolbar>

<br>

<!-- SELECTING ROW -->
<div class="container-fluid">
    <div class="row">
        <!-- Need some space here please  -->     
        <mat-form-field>
            <mat-label>Select author</mat-label>
            <mat-select>
                <mat-option *ngFor="let author of this.retrieved_authors" [value]="author"
                  (click)="this.selected_author = author.name"  
                  (click)="this.RequestBooks(author.name)">
                    {{ author.name }} 
                </mat-option>
            </mat-select>  
        </mat-form-field> 
    
        <mat-form-field>
            <mat-label>Select text</mat-label>
            <mat-select>
                <mat-option *ngFor="let book of this.retrieved_books" [value]="book" 
                  (click)="this.selected_book = book.name"  
                  (click)="this.RequestEditors(this.selected_author, book.name)">
                    {{ book.name }}                
                </mat-option>
            </mat-select>
        </mat-form-field>
    
        <mat-form-field>
            <mat-label>Select edition</mat-label>
            <mat-select>
                <mat-option *ngFor="let editor of this.retrieved_editors" [value]="editor"
                    (click)="this.selected_editor = editor.name"  
                    (click)="this.Request_fragments(this.selected_author, this.selected_book, editor.name)">
                    {{ editor.name }}                     
                </mat-option>
            </mat-select>
            <!-- <mat-hint>Select an edition</mat-hint> -->
        </mat-form-field>
    
        <mat-form-field>
            <mat-label>Fragment</mat-label>
            <mat-select>
                <mat-option *ngFor="let fragment_number of this.retrieved_fragment_numbers" [value]="fragment_number"
                  (click)="Reset_form()"    
                  (click)="this.Retrieve_requested_fragment(this.retrieved_fragments, fragment_number)">
                    {{ fragment_number }} 
                </mat-option>
            </mat-select>
            <!-- <mat-hint>Select a fragment</mat-hint> -->
        </mat-form-field>
    </div>
</div>

<hr>

<!-- TAB GROUPS TO ENTER DATA -->
<div class="container-fluid">
    <div class="row">

      <button mat-button (click)="Request_revise_fragment(this.fragmentForm.value)">Revise Fragment</button>
      <button mat-button (click)="Request_create_fragment(this.fragmentForm.value)" *ngIf="this.authService.isTeacher">Create Fragment</button>
      <button mat-button (click)="Request_delete_fragment(this.fragmentForm.value)" *ngIf="this.authService.isTeacher">Delete Fragment</button>
      <button mat-button (click)="Reset_form()" *ngIf="this.authService.isTeacher">Clear all fields</button>

      <hr>
    </div>
    
    <div class="row">

        <mat-tab-group>
        
            <form [formGroup]="fragmentForm">
              <mat-tab label="Create/Revise Data"><br> 

                <mat-form-field class="input-form-full-width">
                  <mat-label>Fragment name</mat-label>
                  <input matInput type="text" formControlName="fragment_name"> <!--required> -->
                  <mat-hint>Provide the name of the fragment</mat-hint>                       
                </mat-form-field>
              
                <div class="div-padding-sm"></div>

                <mat-form-field class="input-form-full-width">
                  <mat-label>Author name</mat-label>
                  <input matInput type="text" formControlName="author">
                  <mat-hint>Provide the author of the fragment</mat-hint>                       
                </mat-form-field>
              
                <div class="div-padding-sm"></div>

                <mat-form-field class="input-form-full-width">
                  <mat-label>Title name</mat-label>
                  <input matInput type="text" formControlName="title">
                  <mat-hint>Provide the name of the book</mat-hint>                       
                </mat-form-field>

                <div class="div-padding-sm"></div>

                <mat-form-field class="input-form-full-width">
                  <mat-label>Editor name</mat-label>
                  <input matInput type="text" formControlName="editor">
                  <mat-hint>Provide the name of the editor</mat-hint>                       
                </mat-form-field>

                <div class="div-padding-sm"></div>
                <div class="div-padding-sm"></div>

                <mat-form-field appearance="fill">
                  <mat-select required formControlName="status">
                    <mat-option value="">Normal</mat-option>
                    <mat-option value="Incertum">Incertum</mat-option>
                    <mat-option value="Adesp.">Adespota</mat-option>
                  </mat-select>
                  <mat-label>Line status</mat-label>
                </mat-form-field>

                <div class="div-padding"></div>
                <!-- <button mat-button type="submit" [disabled]="!fragmentForm.valid">Upload</button> -->
                <div class="div-padding"></div>              

              </mat-tab>

              <mat-tab label="Create/Revise Lines"><br>

                <form [formGroup]="fragmentForm">
                  <div formArrayName="lines"
                    *ngFor="let item of fragmentForm.get('lines')['controls']; let i = index;">
                    <div [formGroupName]="i">


                      <mat-form-field class="input-form">
                        <mat-label>Fragment name</mat-label>
                        <input matInput type="text" formControlName="line_number"> <!--required> -->
                      </mat-form-field>

                      <mat-form-field class="input-form">
                        <mat-label>Fragment text</mat-label>
                        <input matInput type="text" formControlName="text" [matKeyboard]="'OSCC'"> <!--required> -->
                      </mat-form-field>

                      <!-- <input formControlName="line_number" placeholder="Line name"> -->
                      <!-- <input formControlName="text" placeholder="Line text" [matKeyboard]="'OSCC'">  -->
                      <button mat-button (click)="removeItem('lines', i)">Delete</button>

                    </div>
                  </div>
                  <button type="button" (click)="addItem('line_number', 'text', '','', 'lines')">Add Fragment Line</button>
                </form>

              </mat-tab>

              <mat-tab label="Create/Revise Content"><br>
                  <mat-form-field class="input-form-full-width">
                    <mat-label><b>Fragment translation</b></mat-label>
                    <textarea matInput type="text" formControlName="translation" id="FT" [matKeyboard]="'OSCC'"></textarea>
                    <!-- <mat-hint>Provide the revised translation of the selected fragment</mat-hint>  -->
                  </mat-form-field>

                  <div class="div-padding-sm"></div>

                  <mat-form-field class="input-form-full-width">
                    <mat-label><b>Fragment apparatus criticus</b></mat-label>
                    <textarea matInput type="text" formControlName="apparatus" id="FA" [matKeyboard]="'OSCC'"></textarea>
                    <!-- <mat-hint>Provide the revised apparatus criticus of the selected fragment</mat-hint>                        -->
                  </mat-form-field>

                  <div class="div-padding-sm"></div>
          
                  <mat-form-field class="input-form-full-width">
                    <mat-label><b>Fragment differences</b></mat-label>
                    <textarea matInput type="text" formControlName="differences" id="FD" [matKeyboard]="'OSCC'"></textarea>
                    <!-- <mat-hint>Provide the revised differences of the selected fragment</mat-hint>                        -->
                  </mat-form-field>

                  <div class="div-padding-sm"></div>

                  <mat-form-field class="input-form-full-width">
                    <mat-label><b>Fragment commentary</b></mat-label>
                    <textarea matInput type="text" formControlName="commentary" id="FC" [matKeyboard]="'OSCC'"></textarea>
                    <!-- <mat-hint>Provide the revised commentary of the selected fragment</mat-hint>                        -->
                  </mat-form-field>
                  
                  <div class="div-padding-sm"></div>

                  <mat-form-field class="input-form-full-width">
                    <mat-label><b>Fragment reconstruction</b></mat-label>
                    <textarea matInput type="text" formControlName="reconstruction" id="FR" [matKeyboard]="'OSCC'"></textarea>
                    <!-- <mat-hint>Provide the revised reconstruction of the selected fragment</mat-hint>                        -->
                  </mat-form-field> 

                </mat-tab>

                <mat-tab label="Create/Revise Context"><br>

                  <form [formGroup]="fragmentForm">
                    <div formArrayName="context"
                      *ngFor="let item of fragmentForm.get('context')['controls']; let i = index;">
                      <div [formGroupName]="i">
                        <input formControlName="author" placeholder="Context author name">
                        <input formControlName="location" placeholder="Context location">
                        <input formControlName="text" placeholder="Context text" [matKeyboard]="'OSCC'">
                        <button (click)="removeItem('context', i)">X</button>
                      </div>
                      <!-- Exposed item name: {{ fragmentForm.controls.context.controls[i].controls.name.value }} -->
                    </div>
                    <button type="button" (click)="addItem2('','', '')">Add Fragment Context</button>
                  </form>

                </mat-tab>
            </form>                        

        </mat-tab-group>
        

    </div>
</div>