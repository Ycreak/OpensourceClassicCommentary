<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>open-source-classic-commentary documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">open-source-classic-commentary documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li>Injectables</li>
  <li >Multiplayer</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/fragments/multiplayer.class.ts</code>
        </p>





            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#firestore_session" >firestore_session</a>
                            </li>
                            <li>
                                <a href="#list1Array" >list1Array</a>
                            </li>
                            <li>
                                <a href="#list2Array" >list2Array</a>
                            </li>
                            <li>
                                <a href="#list3Array" >list3Array</a>
                            </li>
                            <li>
                                <a href="#list4Array" >list4Array</a>
                            </li>
                            <li>
                                <a href="#list5Array" >list5Array</a>
                            </li>
                            <li>
                                <a href="#list6Array" >list6Array</a>
                            </li>
                            <li>
                                <a href="#sessionCode" >sessionCode</a>
                            </li>
                            <li>
                                <a href="#showFragmentname" >showFragmentname</a>
                            </li>
                            <li>
                                <a href="#tableName" >tableName</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#CreateFirebaseSession" >CreateFirebaseSession</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#DeleteFirebaseSession" >DeleteFirebaseSession</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#EmptyRecylceBin" >EmptyRecylceBin</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#FirebaseTest" >FirebaseTest</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#InitiateFirestore" >InitiateFirestore</a>
                            </li>
                            <li>
                                <a href="#MultipleColumnsDrag" >MultipleColumnsDrag</a>
                            </li>
                            <li>
                                <a href="#ngOnInit" >ngOnInit</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#RestoreFirebaseSession" >RestoreFirebaseSession</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#SyncWithFirebase" >SyncWithFirebase</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(firestore: AngularFirestore)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="19" class="link-to-prism">src/app/fragments/multiplayer.class.ts:19</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>firestore</td>
                                                  
                                                        <td>
                                                                    <code>AngularFirestore</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="CreateFirebaseSession"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>CreateFirebaseSession</b></span>
                        <a href="#CreateFirebaseSession"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>CreateFirebaseSession(table)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="99"
                            class="link-to-prism">src/app/fragments/multiplayer.class.ts:99</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Creates a firebase session. In other words, creates a document in the
OSCC Firebase. Using the table parameter, it writes two arrays to the
document: one always empty, the other one not empty if a base edition is
selected. Checks if everything went okay. Returns error if not. If succes,
sets the current session code to the newly created session.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>table</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>name of the Firebase table used.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="DeleteFirebaseSession"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>DeleteFirebaseSession</b></span>
                        <a href="#DeleteFirebaseSession"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>DeleteFirebaseSession(session, table)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="142"
                            class="link-to-prism">src/app/fragments/multiplayer.class.ts:142</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Simple function to delete the given session. Takes a session code and
deletes the corresponding document on disk. On delete, all lists are emptied.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>session</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>session to be deleted</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>table</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="EmptyRecylceBin"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>EmptyRecylceBin</b></span>
                        <a href="#EmptyRecylceBin"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>EmptyRecylceBin()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="159"
                            class="link-to-prism">src/app/fragments/multiplayer.class.ts:159</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Simple function to empty the recycle bin.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="FirebaseTest"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>FirebaseTest</b></span>
                        <a href="#FirebaseTest"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>FirebaseTest(thing)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="60"
                            class="link-to-prism">src/app/fragments/multiplayer.class.ts:60</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Little test function to allow printing or doing things with buttons</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>thing</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>template variable, could be used for anything.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="InitiateFirestore"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>InitiateFirestore</b></span>
                        <a href="#InitiateFirestore"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>InitiateFirestore(session, table)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="70"
                            class="link-to-prism">src/app/fragments/multiplayer.class.ts:70</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This function is called onInit and creates a watcher called Multiplayer. It
keeps watching for change in the database and on change, rebuilds the list arrays.
TODO: Create a more elegant solution</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>session</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>stores the session key. Used to retrieve the correct document.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>table</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="MultipleColumnsDrag"></a>
                    <span class="name">
                        <span ><b>MultipleColumnsDrag</b></span>
                        <a href="#MultipleColumnsDrag"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>MultipleColumnsDrag(event: CdkDragDrop<string[]>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="249"
                            class="link-to-prism">src/app/fragments/multiplayer.class.ts:249</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Function to allow dragging elements between multiple containers. Code is
from Angular Material, CdkDrag.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>event</td>
                                    <td>
                                            <code>CdkDragDrop&lt;string[]&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>the movement on HTML. Contains all data necessary for moving.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnInit"></a>
                    <span class="name">
                        <span ><b>ngOnInit</b></span>
                        <a href="#ngOnInit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngOnInit()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="49"
                            class="link-to-prism">src/app/fragments/multiplayer.class.ts:49</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="RestoreFirebaseSession"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>RestoreFirebaseSession</b></span>
                        <a href="#RestoreFirebaseSession"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>RestoreFirebaseSession(session)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="126"
                            class="link-to-prism">src/app/fragments/multiplayer.class.ts:126</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Simple function to restore a previously created session. It simply takes
a session code, sets the class session code and runs the InitiateFirestore
function again with this new session code.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>session</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>session code to be retrieved</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="SyncWithFirebase"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>SyncWithFirebase</b></span>
                        <a href="#SyncWithFirebase"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>SyncWithFirebase(session, table)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="169"
                            class="link-to-prism">src/app/fragments/multiplayer.class.ts:169</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This function is called whenever movement is detected in the synced
columns. This means the fragments are changed and have to be updated in
Firebase. It works by simply reuploading the two arrays to firebase.
A bit dirty, but it works well.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>session</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>table</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="firestore_session"></a>
                    <span class="name">
                        <span ><b>firestore_session</b></span>
                        <a href="#firestore_session"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="37" class="link-to-prism">src/app/fragments/multiplayer.class.ts:37</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="list1Array"></a>
                    <span class="name">
                        <span ><b>list1Array</b></span>
                        <a href="#list1Array"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="27" class="link-to-prism">src/app/fragments/multiplayer.class.ts:27</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="list2Array"></a>
                    <span class="name">
                        <span ><b>list2Array</b></span>
                        <a href="#list2Array"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="28" class="link-to-prism">src/app/fragments/multiplayer.class.ts:28</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="list3Array"></a>
                    <span class="name">
                        <span ><b>list3Array</b></span>
                        <a href="#list3Array"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="29" class="link-to-prism">src/app/fragments/multiplayer.class.ts:29</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="list4Array"></a>
                    <span class="name">
                        <span ><b>list4Array</b></span>
                        <a href="#list4Array"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="30" class="link-to-prism">src/app/fragments/multiplayer.class.ts:30</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="list5Array"></a>
                    <span class="name">
                        <span ><b>list5Array</b></span>
                        <a href="#list5Array"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="31" class="link-to-prism">src/app/fragments/multiplayer.class.ts:31</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="list6Array"></a>
                    <span class="name">
                        <span ><b>list6Array</b></span>
                        <a href="#list6Array"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="32" class="link-to-prism">src/app/fragments/multiplayer.class.ts:32</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="sessionCode"></a>
                    <span class="name">
                        <span ><b>sessionCode</b></span>
                        <a href="#sessionCode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;uOm36WurKEgypunFkvgW&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="40" class="link-to-prism">src/app/fragments/multiplayer.class.ts:40</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showFragmentname"></a>
                    <span class="name">
                        <span ><b>showFragmentname</b></span>
                        <a href="#showFragmentname"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>true</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="42" class="link-to-prism">src/app/fragments/multiplayer.class.ts:42</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="tableName"></a>
                    <span class="name">
                        <span ><b>tableName</b></span>
                        <a href="#tableName"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;fragments&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="34" class="link-to-prism">src/app/fragments/multiplayer.class.ts:34</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { AngularFirestore } from &#x27;@angular/fire/firestore&#x27;;
import { CdkDragDrop, moveItemInArray, transferArrayItem } from &#x27;@angular/cdk/drag-drop&#x27;;

//   __  __       _ _   _       _                       
//  |  \/  |     | | | (_)     | |                      
//  | \  / |_   _| | |_ _ _ __ | | __ _ _   _  ___ _ __ 
//  | |\/| | | | | | __| | &#x27;_ \| |/ _&#x60; | | | |/ _ \ &#x27;__|
//  | |  | | |_| | | |_| | |_) | | (_| | |_| |  __/ |   
//  |_|  |_|\__,_|_|\__|_| .__/|_|\__,_|\__, |\___|_|   
//                       | |             __/ |          
//                       |_|            |___/           
@Injectable({
    providedIn: &#x27;root&#x27;
  })
  // @Component({
  //   template: &#x27;&#x27;
  // })
  export class Multiplayer{
    constructor(
        private firestore: AngularFirestore,
      ){
        // console.log(&quot;Constructor called&quot;); //FIXME: why is this not called upon class creation? (it is now)
      }
  
    // Array initialisations for the four used columns.
    list1Array &#x3D; [];  // First Synced Column
    list2Array &#x3D; [];  // Second Synced Column
    list3Array &#x3D; [];  // Standard Edition Column
    list4Array &#x3D; [];  // My Additions Column
    list5Array &#x3D; [];  // Recycle Bin Column
    list6Array &#x3D; [];
    // Table name in firestore
    tableName : string &#x3D; &#x27;fragments&#x27;;
    // Variable that watches for change in the database. Can be subscribed to
    // and returns data in the &#x27;data&#x27; field.
    firestore_session;
    // Session code. Will be changed when restoring or creating a session.
    // Is simply a document in the OSCC Firebase database. Also shown in HTML.
    sessionCode : string &#x3D; &#x27;uOm36WurKEgypunFkvgW&#x27;; // Default document.
    // Boolean to allow showing of fragment data
    showFragmentname : boolean &#x3D; true;
    // showNotebook : boolean &#x3D; true;
    // showRecycleBin : boolean &#x3D; true;
    // showSuggestions : boolean &#x3D; true;
  
    // suggestionSpinner : boolean &#x3D; false;
   
    ngOnInit(): void { //FIXME: why is this not called upon class creation?
      // Firestore implementation
      this.InitiateFirestore(this.sessionCode, this.tableName);
      console.log(&#x27;hello&#x27;)
     
    }
   
    /**
     * Little test function to allow printing or doing things with buttons
     * @param thing template variable, could be used for anything.
     */
    public FirebaseTest(thing){
      console.log(thing)
    }
    /**
     * This function is called onInit and creates a watcher called Multiplayer. It
     * keeps watching for change in the database and on change, rebuilds the list arrays.
     * TODO: Create a more elegant solution
     * @param session stores the session key. Used to retrieve the correct document.
     * @output refreshes the two synced lists. 
     */
    public InitiateFirestore(session, table){   
      // Create watcher
      this.firestore_session &#x3D; this.firestore.collection(table).valueChanges()
      .subscribe(data &#x3D;&gt; {
        let tempArray &#x3D; []; // Create temporary array filled with all data
        // Create link to firestore to retrieve data
        this.firestore
          .collection(table) 
          .get()
          .subscribe((ss) &#x3D;&gt; { // Subscribe to all documents     
            ss.docs.forEach((doc) &#x3D;&gt; {
              if(doc.id &#x3D;&#x3D; session){ // Only select our session document
                tempArray.push(doc.data()); // Push that document into our array
                //FIXME: This function needs to be much simpler.
                this.list1Array &#x3D; tempArray[0].fragments; // The first entry is the first column
                this.list2Array &#x3D; tempArray[0].fragments2; // Second entry second column
              }
            });
          });
      });
    }
    /**
     * Creates a firebase session. In other words, creates a document in the
     * OSCC Firebase. Using the table parameter, it writes two arrays to the
     * document: one always empty, the other one not empty if a base edition is
     * selected. Checks if everything went okay. Returns error if not. If succes,
     * sets the current session code to the newly created session.
     * @param table name of the Firebase table used.
     */
    public CreateFirebaseSession(table){
      // Unsubscribe from the previous watcher. InitiateFirestore creates a new watcher.
      this.firestore_session.unsubscribe();
      // Empty synced lists
      this.list1Array &#x3D; [];
      this.list2Array &#x3D; [];    
      // Create a new document in the given table.
      this.firestore.collection(table).add({
        fragments: this.list3Array, // Either empty or filled with standard edition
        fragments2: [], // Always empty
      })
      .then(res &#x3D;&gt; {
          // Set Session code to the newly created document
          this.sessionCode &#x3D; res.id
          // Retrieve Data and put it in the column
          this.InitiateFirestore(this.sessionCode, this.tableName)
      })
      .catch(e &#x3D;&gt; {
          console.log(e); //TODO: should be done using the snackbar
      })
    }
    /**
     * Simple function to restore a previously created session. It simply takes
     * a session code, sets the class session code and runs the InitiateFirestore
     * function again with this new session code.
     * @param session session code to be retrieved
     */
    public RestoreFirebaseSession(session){
      // Empty synced lists
      this.list1Array &#x3D; [];
      this.list2Array &#x3D; [];
      // Set the new session code
      this.sessionCode &#x3D; session
      // Unsubscribe from the previous watcher. InitiateFirestore creates a new watcher.
      this.firestore_session.unsubscribe();    
      // Retrieve Data and put it in the column
      this.InitiateFirestore(session, this.tableName)
    }
    /**
     * Simple function to delete the given session. Takes a session code and
     * deletes the corresponding document on disk. On delete, all lists are emptied.
     * @param session session to be deleted
     */
    public DeleteFirebaseSession(session, table){
      // Empty synced lists
      this.list1Array &#x3D; [];
      this.list2Array &#x3D; [];
      // Delete the given entry
      this.firestore
      .collection(table)
      .doc(session)
      .delete();
      // Unsubscribe from the previous watcher.
      this.firestore_session.unsubscribe();      
      // Show Snackbar with information. FIXME: it is underneath the keyboard xD
      // this.open_snackbar(&#x27;Please create a new session before doing anything.&#x27;) TODO:
    }
    /**
     * Simple function to empty the recycle bin.
     */
    public EmptyRecylceBin(){
      // Empty the Recyle Bin List
      this.list5Array &#x3D; [];
    }
    /**
     * This function is called whenever movement is detected in the synced
     * columns. This means the fragments are changed and have to be updated in
     * Firebase. It works by simply reuploading the two arrays to firebase.
     * A bit dirty, but it works well.
     */
    public SyncWithFirebase(session, table){
      // Push the data to the correct document
      this.firestore
        .collection(table)
        .doc(&#x27;/&#x27; + session) // Pick the correct document to update
        // Upload the two arrays to their corresponding locations.
        .update({fragments: this.list1Array, fragments2: this.list2Array})
        // On succes, log. TODO: we could just leave this out.
        .then(() &#x3D;&gt; {
          console.log(&#x27;Sync complete&#x27;);
        }) // On error, log error. TODO: this should be in a snackbar
        .catch(function(error) {
          // console.error(&#x27;Error writing document: &#x27;, error);
          this.handle_error_message(error)
        });   
    }
  
    // TODO: need to be able to call confirmation dialogs from anywhere
    // public RequestDeleteSession(session: string){
    //   this.open_confirmation_dialog(&#x27;Are you sure you want to DELETE this session?&#x27;, session).subscribe(result &#x3D;&gt; {
    //     if(result){
    //       this.DeleteFirebaseSession(session, this.tableName);
    //     }
    //   });
    // }
  
    // public async CreateSuggestionsMovedFragment(fragment){
    //   // this.spinner &#x3D; true; TODO:
  
    //   console.log(&#x27;communicating with server&#x27;)
    //   let words &#x3D; &#x27;&#x27;;
    //   let result &#x3D; [];
    //   let content &#x3D; [];
    //   console.log(fragment);
      
    //   // Retrieve all the words in a fragment and put them into one single string
    //   for(const line in fragment.content){
    //     console.log(&#x27;line&#x27;, fragment.content[line].lineContent)
    //     words +&#x3D; fragment.content[line].lineContent + &#x27; &#x27;
    //   } 
  
    //   console.log(words)
    //   // Send the words to the server for analysis. It will return the stemms of
    //   // the nouns and verbs in the sent string.
    //   let temp &#x3D; await this.api.GetInterestingWords(words);
    //   // For every returned stem, check if it occurs in the fragments list which is
    //   // currently loaded in memory. If it occurs, create a new fragment and put the
    //   // subsequent fragment array in list6Array, which will occur in the suggestions list.
    //   for(const item in temp){
    //     // Check the fragment list
    //     for(const object in this.F_Fragments){
    //       // If a match is found, create a fragment
    //       if(this.F_Fragments[object].lineContent.indexOf(temp[item]) !&#x3D; -1){
    //         // Retrieve the editor name using its key.
    //         let editorName &#x3D; this.utility.FilterObjOnKey(this.editorsJSON, &#x27;id&#x27;, this.F_Fragments[object].editor)
  
    //         console.log(this.F_Fragments[object].fragmentName, this.F_Fragments[object].editor, this.F_Fragments[object].book)
    //         // Push the content to the content array
    //         content.push({lineComplete: this.F_Fragments[object].lineContent})
    //         // Push the rest of the necessary data to the array
    //         result.push({fragmentName: this.F_Fragments[object].fragmentName, content: content,
    //           author: this.currentAuthorName, text: this.currentBookName, editor: editorName[0].name, note: false, reason: temp[item]})
    //         content &#x3D; [];
    //       }
    //     }
    //   }
    //   // This should be done using a return, but as the function is async, it is solved temporary like this.
    //   this.list6Array &#x3D; result;
  
    //   this.spinner &#x3D; false;
  
    //   console.log(result)
  
    // }
  
    /**
     * Function to allow dragging elements between multiple containers. Code is
     * from Angular Material, CdkDrag.
     * @param event the movement on HTML. Contains all data necessary for moving.
     */
    MultipleColumnsDrag(event: CdkDragDrop&lt;string[]&gt;) {   
      console.log(event.previousContainer.id)
      // Retrieve Suggestions for the fragment that was just moved inside the suggestion box
      // if(event.container.id &#x3D;&#x3D; &quot;cdk-drop-list-2&quot;){
      //   this.CreateSuggestionsMovedFragment(event.previousContainer.data[event.previousIndex])   
      // } 
      // This part handles movement in the same containter
      if (event.previousContainer &#x3D;&#x3D;&#x3D; event.container) {
        moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);
        // If something happens with the sync columns, update the firebase
        if(event.container.id &#x3D;&#x3D; &quot;cdk-drop-list-0&quot; || event.container.id &#x3D;&#x3D; &quot;cdk-drop-list-1&quot;){        // No parameters: just sync the two first columns.
          this.SyncWithFirebase(this.sessionCode, this.tableName);
        }
      } else {
        transferArrayItem(event.previousContainer.data,
                          event.container.data,
                          event.previousIndex,
                          event.currentIndex);
        console.log(&#x27;from&#x27;, event.previousContainer.id)  
        console.log(&#x27;to&#x27;, event.container.id)  
        // If something is moved to the Recycle Bin, delete everything in it.
        if(event.container.id &#x3D;&#x3D; &quot;cdk-drop-list-3&quot;){
          this.EmptyRecylceBin();
        }
        
        // If something happens with the sync columns, update the firebase. This is either
        // column 1 being to or from, or column 0 being to or from. Therefore 4 comparisons.
        if(event.container.id &#x3D;&#x3D; &quot;cdk-drop-list-0&quot; || event.container.id &#x3D;&#x3D; &quot;cdk-drop-list-1&quot;
            || event.previousContainer.id &#x3D;&#x3D; &quot;cdk-drop-list-0&quot; || event.previousContainer.id &#x3D;&#x3D; &quot;cdk-drop-list-1&quot;){
          // Sync the two first columns.
          this.SyncWithFirebase(this.sessionCode, this.tableName);
        }
      }
    }
  }</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'Multiplayer.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
