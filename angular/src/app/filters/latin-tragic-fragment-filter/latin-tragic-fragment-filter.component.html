<!-- Button to select the text -->
<button *ngIf="this.button_type === 'stroked'" mat-stroked-button [matMenuTriggerFor]="menu_authors">
  {{ this.button_title }}
</button>

<button *ngIf="this.button_type === 'basic'" mat-button [matMenuTriggerFor]="menu_authors">
  {{ this.button_title }}
</button>

<!-- Nested menu to select author - title - editor. -->
<mat-menu #menu_authors="matMenu">
  <ng-container *ngFor="let author of this.api.get_author_list()">
    <button
      mat-menu-item
      (menuOpened)="this.titles = this.api.get_title_list(author)"
      (menuOpened)="this.selected_author = author"
      [matMenuTriggerFor]="menu_titles">
      {{ author }}
    </button>
  </ng-container>
</mat-menu>

<mat-menu #menu_titles="matMenu">
  <ng-container *ngFor="let title of this.titles">
    <button
      mat-menu-item
      (menuOpened)="this.editors = this.api.get_editor_list(this.selected_author, title)"
      (menuOpened)="this.selected_title = title"
      [matMenuTriggerFor]="menu_editors">
      {{ title }}
    </button>
  </ng-container>
</mat-menu>

<mat-menu #menu_editors="matMenu">
  <ng-container *ngFor="let editor of this.editors">
    <!--If the endpoint is editor, we return the filter when the editor is clicked-->
    <button
      *ngIf="this.endpoint === 'editor'"
      mat-menu-item
      (click)="this.selected_editor = editor"
      (click)="this.filter()">
      {{ editor }}
    </button>
    <!--If the endpoint is name, we open another menu name and let that one return the filter-->
    <button
      *ngIf="this.endpoint === 'name'"
      mat-menu-item
      (menuOpened)="this.names = this.api.get_names_list(this.selected_author, this.selected_title, editor)"
      (menuOpened)="this.selected_editor = editor"
      [matMenuTriggerFor]="menu_names">
      {{ editor }}
    </button>
  </ng-container>
</mat-menu>

<mat-menu #menu_names="matMenu">
  <ng-container *ngFor="let name of this.names">
    <button mat-menu-item (click)="this.selected_name = name" (click)="this.filter()">
      {{ name }}
    </button>
  </ng-container>
</mat-menu>
